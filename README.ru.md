<p align="center">
  <a href="README.ru.md"><img src="https://img.shields.io/badge/Русский-Readme-blue" alt="Russian" /></a>&nbsp;&nbsp;
  <a href="README.md"><img src="https://img.shields.io/badge/English-Readme-blue" alt="English" /></a>&nbsp;&nbsp;
  <img src="https://visitor-badge.laobi.icu/badge?page_id=White-Tiger-PX.auto-moving-files" alt="visitors" />&nbsp;&nbsp;
  <img src="https://img.shields.io/github/stars/White-Tiger-PX/auto-moving-files?style=social" alt="GitHub stars" />
</p>

# auto-moving-files

Этот скрипт предназначен для перемещения или копирования файлов и папок на основе определенных условий, таких как время последнего изменения или первое обнаружение файла.

## Описание

Скрипт выполняет следующие задачи:

- Сканиует указанную директорию и её подкаталоги.
- Проверяет файлы на основе их времени последнего изменения и времени первого обнаружения.
- Копирует или перемещает файлы, которые удовлетворяют заданным условиям.
- Создаёт логи выполнения операций, если включена соответствующая настройка.

## Конфигурация

Настройки скрипта находятся в файле `config.py`. Пример файла конфигурации:

```python
LOG_FOLDER                         = "logs"
DIRECTORY_WITH_SCANNED_DIRECTORIES = "data/scanned_directories"
DIRECTORIES_SETTINGS = [
    {
        "input":  "C:/Users/user/Pictures",
        "output": "D:/Backup/Pictures",
        "time_limit_for_modified_time": 604800,
        "time_limit_for_first_seen":    604800,
        "action_by_last_modified": True,
        "action_by_first_seen":    True,
        "save_folders":            True,
        "copy":                    True,
        "overwrite_files":         False,
        "file_name_exceptions": [

        ],
        "directory_name_exceptions": [

        ],
        "date_grouping_options": {
            "create_date_folders_in_root": False,
            "group_by_days":   False,
            "group_by_months": False,
            "group_by_years":  False
        }
    }
]
```

### Описание полей конфигурации

- **LOG_FOLDER**: Папка для сохранения логов (используется, если `LOG_FOLDER` не `None`).
- **DIRECTORY_WITH_SCANNED_DIRECTORIES**: Папка, в которой будут сохраняться данные о сканируемых директориях.
- **DIRECTORIES_SETTINGS**: Список директорий, которые нужно обрабатывать. Каждая директория включает в себя следующие параметры:
  - **input**: Путь к исходной папке для сканирования.
  - **output**: Путь к папке, куда будут перемещаться или копироваться файлы.
  - **time_limit_for_modified_time**: Время (в секундах) с момента последнего изменения, после которого файл подходит под условия действия.
  - **time_limit_for_first_seen**: Время (в секундах) с момента первого обнаружения файла, после которого файл подходит под условия действия.
  - **action_by_last_modified**: Булевое значение, указывающее, следует ли учитывать время последнего изменения файла.
  - **action_by_first_seen**: Булевое значение, указывающее, следует ли учитывать время первого обнаружения файла.
  - **save_folders**: Булевое значение, указывающее, следует ли сохранять структуру папок при копировании или перемещении файлов.
  - **copy**: Булевое значение, указывающее, следует ли копировать файлы (если `True`) или перемещать их (если `False`).
  - **overwrite_files**: Булевое значение, указывающее, следует ли перезаписывать существующие файлы в папке `output` (если `True`).
  - **file_name_exceptions**: Список исключений по именам файлов, которые не будут перемещаться или копироваться.
  - **directory_name_exceptions**: Список исключений по именам директорий, которые не будут обрабатываться.
  - **date_grouping_options**: Опции группировки файлов по дате. Возможные параметры:
    - **create_date_folders_in_root**: Булевое значение, указывающее, следует ли создавать папки с датой в корне целевой папки.
    - **group_by_days**: Булевое значение, указывающее, следует ли группировать файлы по дням.
    - **group_by_months**: Булевое значение, указывающее, следует ли группировать файлы по месяцам.
    - **group_by_years**: Булевое значение, указывающее, следует ли группировать файлы по годам.

## Примечания

- Скрипт использует стандартные библиотеки Python, так что не требуется дополнительных зависимостей, кроме стандартной библиотеки.
- Для работы с большими объемами данных может потребоваться некоторое время на выполнение.
- Убедитесь, что пути в `config.py` указаны корректно для вашей операционной системы.

### Автоматическое выполнение скрипта

Чтобы скрипт выполнялся автоматически при запуске системы, настройте задачу в **Планировщике заданий Windows**:

1. Откройте **Планировщик заданий**, найдя его в меню Пуск (или нажмите `Win + R`, введите `taskschd.msc` и нажмите Enter).
2. Нажмите на **Создать задачу** в правой панели.
3. Укажите имя для вашей задачи (например, "Установить случайные обои").
4. Перейдите на вкладку **Триггеры** и нажмите **Создать**.
   - Установите параметр **Начать задачу** на **При входе в систему**, чтобы задача запускалась при каждом входе в систему.
   - Опционально, установите флажок **Повторять задачу каждые** и укажите интервал (например, каждый час), если хотите, чтобы задача выполнялась периодически.
5. Перейдите на вкладку **Действия**, нажмите **Создать** и выберите **Запуск программы**.
6. Выберите исполнимый файл Python. По умолчанию он находится по следующему пути:
   `C:\Users\ВАШЕ_ИМЯ_ПОЛЬЗОВАТЕЛЯ\AppData\Local\Programs\Python\ВАША_ВЕРСИЯ_python\python.exe`.
7. В поле **Добавить аргументы** укажите полный путь к вашему скрипту. Например:
   `(C:\programs\auto_moving_files.py)`
   *(Убедитесь, что путь заключён в кавычки, если он содержит пробелы.)*
8. Нажмите **ОК**, чтобы сохранить задачу.

<div style="justify-content: space-between; align-items: center;">
  <div style="text-align: center;">
    <img src="Task Scheduler - General.png" alt="Task Scheduler - General" width="75%" />
  </div>

  <div style="text-align: center;">
    <img src="Task Scheduler - Triggers.png" alt="Task Scheduler - Triggers" width="75%" />
  </div>

  <div style="text-align: center;">
    <img src="Task Scheduler - Actions.png" alt="Task Scheduler - Actions" width="75%" />
  </div>
</div>
